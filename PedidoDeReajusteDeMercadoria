pragma solidity 0.5.12;

contract SolicitacaoReajusteDePreco
{
    uint256 public valor_solicitado_mercadoria;
    uint256 public valor_da_mercadoria;
    uint256 public data_vigencia;
    uint256 data_do_pedido_reajuste;
    uint256 data_entrega_material;
    
    
    constructor( uint256 ano_mes_dia_pedido_reajuste, uint256 ano_mes_dia_entrega_material, uint256 novo_preco ) public
    {
        valor_solicitado_mercadoria = novo_preco;
        data_do_pedido_reajuste = ano_mes_dia_pedido_reajuste;
        data_entrega_material = ano_mes_dia_entrega_material;
    }
    
    //
    
    function AvaliarRequisitos(uint8 tem_instrucao, uint8 tem_solicitacao ) public returns(string memory resultado)
    {
        require( tem_solicitacao == 1, "Não tem solicitação");
        require( data_entrega_material > data_do_pedido_reajuste, "Pedido não pode ser menor que data de reajuste");
        
        uint8[] memory requisitos = new uint8[](2);
        
        // definicao das regras
        
        if ( (data_entrega_material - data_do_pedido_reajuste ) < 30 )
        {
            if (tem_instrucao == 0 )
            {
                requisitos[0] = 0;
            }
            else
            {
                requisitos[0] = 1;
            }
        }
        else
        {
            requisitos[0] = 1;
        }
        
        // limite do valor negociado
        
        if ( valor_solicitado_mercadoria <= 5 )
        {
           requisitos[1] = 1;    
        }
        else
        {
            requisitos[1] = 0;
        }
        
        uint8 resultado_dos_requisitos = 1;
        
        
        for (uint8 i = 0; i < 2; i++ )
        {
            resultado_dos_requisitos = resultado_dos_requisitos * requisitos[i];
        }
        
        if (resultado_dos_requisitos == 1)
        {
            resultado = "Aprovado";
            
            valor_da_mercadoria = valor_solicitado_mercadoria;
            data_vigencia = data_do_pedido_reajuste;
        }
        else
        {
            resultado = "Negado";
        }
        
        return( resultado );
    }

}
